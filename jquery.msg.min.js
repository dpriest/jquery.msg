/* Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.0
*
* Requires: 
* jQuery 1.2.6+, 
* jQuery Center plugin 1.0.0+ https://github.com/dreamerslab/jquery.center
*/
(function(f,h){var g,d=0,c=0,b=function(){},e={unblock:function(){if(d-c===1){$overlay=f("#jquery-msg-overlay").fadeOut(g.fadeOut,function(){b($overlay);$overlay.remove();});c=d;}}},a={unblock:function(i){var j=i===undefined?0:i;setTimeout(function(){e.unblock();},j);},replace:function(i){if(i===undefined&&typeof(i)==="string"){throw"$.msg('replace') error: second argument is undefined or is not a string";}f("#jquery-msg-content").empty().html(i).center();}};f.msg=function(l,j){var i,k;g=f.extend({afterBlock:function(){},autoUnblock:true,center:{topPercentage:0.4},css:{},clickUblock:true,content:"Please wait...",fadeIn:200,fadeOut:300,bgPath:"/img/",klass:"black-on-white",method:"appendTo",target:"body",timeOut:2400,z:1000},l);i=f('<div id="jquery-msg-overlay" class="'+g.klass+'" style="position:absolute; z-index:'+g.z+"; top:0px; right:0px; left:0px; height:"+f(h).height()+'px;"><img src="'+g.bgPath+'blank.gif" id="jquery-msg-bg" style="width: 100%; height: 100%; top: 0px; left: 0px;"/><div id="jquery-msg-content" class="jquery-msg-content" style="position:absolute;">'+g.content+"</div></div>");if(g.beforeUnblock){b=g.beforeUnblock;}if(typeof(l)==="string"){a[l](j);}else{i[g.method](g.target);k=f("#jquery-msg-content").center(g.center).css(g.css).hide();i.hide().fadeIn(g.fadeIn,function(){k.fadeIn("fast");d++;g.afterBlock(i);if(g.clickUblock){i.bind("click",function(m){m.stopPropagation();e.unblock();});}if(g.autoUnblock){setTimeout(e.unblock,g.timeOut);}});}return this;};})(jQuery,document);